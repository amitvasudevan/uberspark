/*
    uberspark sentinel manifest 
    author: amit vasudevan (amitvasudevan@acm.org)
*/

{

		"uberspark.manifest.namespace" : "uberspark/sentinels",
		"uberspark.manifest.version_min" : "any",
		"uberspark.manifest.version_max" : "any",

		"uberspark.sentinel.namespace" : "uberspark/sentinels/init/x86_32/drot/pc/pmr0/call",
		"uberspark.sentinel.platform" : "pc",
		"uberspark.sentinel.arch" : "x86_32",
        "uberspark.sentinel.cpu" : "intel",
        "uberspark.sentinel.sizeof_code_template" : "0x1000", 

        /*  sentinel code template 

            parameters: 
            PUBLICMETHOD_ADDR = address of public method within uobj/uobjcoll
        */ 
        "uberspark.sentinel.code_template": "
            /* sentinel size = SENTINEL_SIZE */
            .space 0x3000, 0
            .space 0x80, 0
            .global init_start
            init_start:
                movl $(PUBLICMETHOD_ADDR), %eax
                jmpl *%eax
                hlt
            ",

        /*  sentinel library code template 

            parameters: 
            PUBLICMETHOD_SENTINEL_ADDR = address of public method sentinel
        */ 
        "uberspark.sentinel.library_code_template": "
            movl (PUBLICMETHOD_SENTINEL_ADDR), %eax
            jmpl *%eax
        "


}
