/*
    uberspark uobj sentinel linkage table manifest (x86_32/generic)
    author: amit vasudevan (amitvasudevan@acm.org)
*/

{

	/* uberspark header */
	"uberspark-hdr":{
		"coss_version" : "any",
		"mftype" : "uobjslt",
		"uberspark_min_version" : "any",
		"uberspark_max_version" : "any"
	},


    /* uobjslt header */
	"uobjslt-hdr":{
		"namespace" : "/uberspark/uobjslt/x86_32/generic",
		"platform" : "generic",
		"arch" : "x86_32",
		"cpu" : "generic"
	},

    /*  trampoline code template 

        parameters: 
        TRAMPOLINE_FN_INDEX = 0 based index of the ubj callee/exitcallee function
    */ 
    "uobjslt-trampolinecode": "
        movl $(TRAMPOLINE_FN_INDEX), %eax
        jmpl *%eax
    ",


    /*  trampoline data template

        parameters:
        TOTAL_TRAMPOLINES = total number of trampolines
        SIZEOF_TRAMPOLINE_ENTRY = size in bytes of trampoline entry
    */
    "uobjslt-trampolinedata": "
        .byte $(TOTAL_TRAMPOLINES) * $(SIZEOF_TRAMPOLINE_ENTRY) \r\n
    "

}