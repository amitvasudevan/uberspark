(* uberspark config tool: to locate hwm, libraries and headers *)
(* author: amit vasudevan (amitvasudevan@acm.org) *)

open Sys
open Unix

let g_install_prefix = "@prefix@";;
let g_uberspark_install_bindir = "@prefix@@ubersparkbindir@";;
let g_uberspark_install_homedir = "@prefix@@ubersparkhomedir@";;
let g_uberspark_install_includedir = "@prefix@@ubersparkhomedir@@ubersparkincludedir@";;
let g_uberspark_install_hwmdir = "@prefix@@ubersparkhomedir@@ubersparkhwmdir@";;
let g_uberspark_install_hwmincludedir = "@prefix@@ubersparkhomedir@@ubersparkhwmincludedir@";;
let g_uberspark_install_libsdir = "@prefix@@ubersparkhomedir@@ubersparklibsdir@";;
let g_uberspark_install_libsincludesdir = "@prefix@@ubersparkhomedir@@ubersparklibsincludesdir@";;
let g_uberspark_install_loadersdir = "@prefix@@ubersparkhomedir@@ubersparkloadersdir@";;
let g_uberspark_install_loadersincludesdir = "@prefix@@ubersparkhomedir@@ubersparkloadersincludesdir@";;
let g_uberspark_install_toolsdir = "@prefix@@ubersparkhomedir@@ubersparktoolsdir@";;
let g_uberspark_install_uobjcolldir = "@prefix@@ubersparkhomedir@@ubersparkuobjcolldir@";;

let g_uberspark_basedefs = "-D__XMHF_TARGET_CPU_X86__ -D__XMHF_TARGET_CONTAINER_VMX__ -D__XMHF_TARGET_PLATFORM_X86PC__ -D__XMHF_TARGET_TRIAD_X86_VMX_X86PC__";;
 
let main () =
	let len = Array.length Sys.argv in
		if len = 2 then
	    	begin
	      		if (compare "--print-uberspark-bindir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_bindir;
	      				print_newline ();
	      			end
	      		else if (compare "--print-uberspark-homedir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_homedir;
	      				print_newline ();
	      			end
	      		else if (compare "--print-uberspark-includedir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_includedir;
	      				print_newline ();
	      			end
	      		else if (compare "--print-uberspark-hwmdir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_hwmdir;
	      				print_newline ();
	      			end
	      		else if (compare "--print-uberspark-hwmincludedir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_hwmincludedir;
	      				print_newline ();
	      			end
	      		else if (compare "--print-uberspark-libsdir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_libsdir;
	      				print_newline ();
	      			end
	      		else if (compare "--print-uberspark-libsincludesdir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_libsincludesdir;
	      				print_newline ();
	      			end

	      		else if (compare "--print-uberspark-loadersdir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_loadersdir;
	      				print_newline ();
	      			end
	      		else if (compare "--print-uberspark-loadersincludesdir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_loadersincludesdir;
	      				print_newline ();
	      			end

	      		else if (compare "--print-uberspark-toolsdir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_toolsdir;
	      				print_newline ();
	      			end

	      		else if (compare "--print-uberspark-uobjcolldir" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_install_uobjcolldir;
	      				print_newline ();
	      			end

	      		else if (compare "--print-uberspark-basedefs" Sys.argv.(1)) = 0 then
	      			begin
						print_string g_uberspark_basedefs;
	      				print_newline ();
	      			end


	      		else
	      			begin
						print_string "Invalid argument!";
						print_newline ();
	      			end
	    	end
	    else
	    	begin
				print_string "Too many arguments!";
				print_newline ();
			end
		;;
		
main ();;

